{% extends "base.html" %}
{% block title %}
  Страница пользователя {{ profile.username }}
{% endblock %}
{% block content %}
<div class="container py-5">
  <h1>{{ profile.first_name }} {{ profile.last_name }}</h1>
  <p>@{{ profile.username }}</p>
  
  {% if user == profile %}
    <div class="mb-5">
      <a class="btn btn-primary" href="{% url 'password_change' %}">Изменить пароль</a>
      <a class="btn btn-primary" href="{% url 'blog:edit_profile' profile.username %}">Редактировать профиль</a>
    </div>
  {% endif %}

  {% for post in page_obj %}
    <article class="mb-5">
      {% if post.image %}
        <img class="card-img my-2" src="{{ post.image.url }}" alt="{{ post.title }}">
      {% endif %}
      <h2>{{ post.title }}</h2>
      <p>{{ post.text|truncatewords:20 }}</p>
      <p>Комментарии ({{ post.comments.count }})</p>
    </article>
  {% endfor %}
</div>
{% endblock %}